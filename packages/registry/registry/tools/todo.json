{
	"name": "todo",
	"type": "registry:tool",
	"title": "Todo",
	"description": "Todo tool for AI agents",
	"dependencies": ["ai", "zod"],
	"files": [
		{
			"path": "tools/todo.ts",
			"type": "registry:tool",
			"content": "import { tool } from \"ai\"\nimport { z } from \"zod\"\n\nexport const TodoItem = z.object({\n\tid: z.string().describe(\"Unique identifier for the todo item\"),\n\tcontent: z.string().describe(\"Brief description of the task\"),\n\tstatus: z\n\t\t.enum([\"pending\", \"in_progress\", \"completed\", \"cancelled\"])\n\t\t.describe(\"Current status of the task\"),\n})\n\nexport type TodoItem = z.infer<typeof TodoItem>\n\nexport interface TodoStorage {\n\tget: () => Promise<TodoItem[]>\n\tset: (todos: TodoItem[]) => Promise<void>\n}\n\nfunction createInMemoryStorage(): TodoStorage {\n\tlet todos: TodoItem[] = []\n\treturn {\n\t\tget: async () => todos,\n\t\tset: async (newTodos) => {\n\t\t\ttodos = newTodos\n\t\t},\n\t}\n}\n\nconst TODO_READ_DESCRIPTION = `Read the current todo list for this session.\n\nUse this tool frequently to stay aware of task status:\n- At the beginning of conversations to see what's pending\n- Before starting new tasks to prioritize work\n- When uncertain about what to do next\n- After completing tasks to update your understanding\n\nReturns a list of todo items with their id, content, and status.\nIf no todos exist, an empty list is returned.`\n\nconst TODO_WRITE_DESCRIPTION = `Create and manage a structured task list for the current session.\n\n## When to Use\n- Complex multi-step tasks (3+ distinct steps)\n- User provides multiple tasks (numbered or comma-separated)\n- After receiving new instructions - capture requirements as todos\n- After completing a task - mark complete and add follow-ups\n- When starting a task - mark as in_progress (only one at a time)\n\n## When NOT to Use\n- Single, straightforward tasks\n- Trivial tasks completable in <3 steps\n- Purely conversational/informational requests\n\n## Task States\n- pending: Not yet started\n- in_progress: Currently working on (limit to ONE at a time)\n- completed: Finished successfully\n- cancelled: No longer needed\n\n## Task Management\n- Update status in real-time as you work\n- Mark tasks complete IMMEDIATELY after finishing\n- Only have ONE task in_progress at any time\n- Complete current tasks before starting new ones`\n\nexport function createTodoTools(storage?: TodoStorage) {\n\tconst store = storage ?? createInMemoryStorage()\n\n\tconst todoRead = tool({\n\t\tdescription: TODO_READ_DESCRIPTION,\n\t\tinputSchema: z.object({}),\n\t\toutputSchema: z.object({\n\t\t\ttodos: z.array(TodoItem),\n\t\t\tcount: z.number(),\n\t\t\tpending: z.number(),\n\t\t}),\n\t\tasync execute() {\n\t\t\tconst todos = await store.get()\n\t\t\tconst pending = todos.filter(\n\t\t\t\t(t) => t.status === \"pending\" || t.status === \"in_progress\",\n\t\t\t).length\n\n\t\t\treturn {\n\t\t\t\ttodos,\n\t\t\t\tcount: todos.length,\n\t\t\t\tpending,\n\t\t\t}\n\t\t},\n\t})\n\n\tconst todoWrite = tool({\n\t\tdescription: TODO_WRITE_DESCRIPTION,\n\t\tinputSchema: z.object({\n\t\t\ttodos: z.array(TodoItem).describe(\"The complete updated todo list\"),\n\t\t}),\n\t\toutputSchema: z.object({\n\t\t\ttodos: z.array(TodoItem),\n\t\t\tcount: z.number(),\n\t\t\tpending: z.number(),\n\t\t}),\n\t\tasync execute({ todos }) {\n\t\t\tawait store.set(todos)\n\t\t\tconst pending = todos.filter(\n\t\t\t\t(t) => t.status === \"pending\" || t.status === \"in_progress\",\n\t\t\t).length\n\n\t\t\treturn {\n\t\t\t\ttodos,\n\t\t\t\tcount: todos.length,\n\t\t\t\tpending,\n\t\t\t}\n\t\t},\n\t})\n\n\treturn { todoRead, todoWrite }\n}\n"
		}
	]
}
